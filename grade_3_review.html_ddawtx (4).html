<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRADE 3..Train now, win later!ğŸš€ ØªØ¯Ø±Ù‘Ø¨ Ø§Ù„Ø¢Ù†ØŒ Ù„ØªÙÙˆØ² Ù„Ø§Ø­Ù‚Ø§Ù‹!</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+Arabic:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Inter', 'Noto Sans Arabic', sans-serif;
            background-color: #f7f9fc;
        }

        .arabic-text {
            direction: rtl;
            text-align: right;
        }

        .shadow-neon {
            box-shadow: 0 4px 15px rgba(100, 100, 255, 0.4);
        }

        .answer-btn {
            transition: all 0.2s;
            text-align: left;
        }
        
        .arabic-text-btn {
            text-align: right;
        }

        .answer-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }
        
        .hint-btn {
            background-color: #facc15; 
            color: #1f2937;
            font-weight: bold;
            transition: background-color 0.2s;
        }

        .hint-btn:hover {
            background-color: #eab308;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="quiz-container" class="w-full max-w-md bg-white p-6 md:p-8 rounded-xl shadow-neon border border-blue-100">

        <div id="content"></div>

    </div>

    <div id="tempMessageBoxContainer"></div>

    <script>
        // Global State Variables
        let userName = '';
        let currentTopic = '';
        let questionIndex = 0;
        let score = 0;
        let feedback = []; 
        let currentQuestionSet = [];
        let attemptsMade = 0;
        let hintUsed = false;
        let currentSetIndex = 0; 

        // ğŸ›‘ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ† (Ø³ÙŠØªÙ… ÙØªØ­Ù‡ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©)
        const CHART_IMAGE_URL = 'https://res.cloudinary.com/dvvvpimum/image/upload/v1761231005/bar_byabny.png'; 

        // --- Question Bank (Finalized Sets) ---
        const QUESTION_SETS = {
            'CCDI': [
                // Set 1: Data Visualization Analysis (5 Questions based on Bar Chart)
                [
                    { 
                        q_en: "Viewing the chart (Books read in the summer holiday): Who read the greatest number of books?", 
                        q_ar: "Ø¨Ø§Ù„Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ: Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ù‚Ø±Ø£ Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ù…Ù† Ø§Ù„ÙƒØªØ¨ØŸ", 
                        options: ["Sally (Ø³Ø§Ù„ÙŠ)", "Fred (ÙØ±ÙŠØ¯)", "Omi (Ø£ÙˆÙ…ÙŠ)"], 
                        correct: "Omi (Ø£ÙˆÙ…ÙŠ)", 
                        explanation_en: "Omi's bar is the tallest, reaching 8 books, which is the maximum value in the chart.", 
                        explanation_ar: "Ø¹Ù…ÙˆØ¯ Ø£ÙˆÙ…ÙŠ Ù‡Ùˆ Ø§Ù„Ø£Ø·ÙˆÙ„ØŒ Ø­ÙŠØ« ÙŠØµÙ„ Ø¥Ù„Ù‰ 8 ÙƒØªØ¨ØŒ ÙˆÙ‡ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ.", 
                        hint_en: "Look for the tallest bar.",
                        hint_ar: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ø·ÙˆÙ„ Ø¹Ù…ÙˆØ¯.",
                        point: 1,
                        // ğŸ›‘ ØªÙ… ØªØºÙŠÙŠØ± image_url Ø¥Ù„Ù‰ image_link
                        image_link: CHART_IMAGE_URL 
                    },
                    { 
                        q_en: "Which step in the Design Process involves generating many ideas for a solution?", 
                        q_ar: "Ø£ÙŠ Ø®Ø·ÙˆØ© ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØµÙ…ÙŠÙ… ØªØªØ¶Ù…Ù† ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£ÙÙƒØ§Ø± Ù„Ù„Ø­Ù„ØŸ", 
                        options: ["Ask (Ø§Ø³Ø£Ù„)", "Plan (Ø®Ø·Ø·)", "Imagine (ØªØ®ÙŠÙ„)"], 
                        correct: "Imagine (ØªØ®ÙŠÙ„)", 
                        explanation_en: "The **Imagine** step is where we brainstorm and think of many possible solutions.", 
                        explanation_ar: "Ø®Ø·ÙˆØ© **Ø§Ù„ØªØ®ÙŠÙ„** Ù‡ÙŠ Ø­ÙŠØ« Ù†ØªØ®ÙŠÙ„ ÙˆÙ†ÙÙƒØ± ÙÙŠ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£ÙÙƒØ§Ø± Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ØªÙƒÙˆÙ† Ø­Ù„ÙˆÙ„Ø§Ù‹ Ø¬ÙŠØ¯Ø©.", 
                        hint_en: "This step is about creativity and possibility.",
                        hint_ar: "Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© ØªØ¯ÙˆØ± Ø­ÙˆÙ„ Ø§Ù„Ø®ÙŠØ§Ù„ ÙˆØ§Ù„Ø¥Ø¨Ø¯Ø§Ø¹.",
                        point: 1 
                    },
                    { 
                        q_en: "Viewing the chart: How many books did Fred read?", 
                        q_ar: "Ø¨Ø§Ù„Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ: ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ¨ Ø§Ù„ØªÙŠ Ù‚Ø±Ø£Ù‡Ø§ ÙØ±ÙŠØ¯ØŸ", 
                        options: ["5 books (5 ÙƒØªØ¨)", "6 books (6 ÙƒØªØ¨)", "7 books (7 ÙƒØªØ¨)"], 
                        correct: "7 books (7 ÙƒØªØ¨)", 
                        explanation_en: "The blue bar for Fred aligns with the number 7 on the vertical axis (y-axis).", 
                        explanation_ar: "Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø®Ø§Øµ Ø¨ÙØ±ÙŠØ¯ ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø§Ù„Ø±Ù‚Ù… 7 Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø±Ø£Ø³ÙŠ (Ø§Ù„Ù…Ø­ÙˆØ± y).", 
                        hint_en: "Follow Fred's bar across to the 'Number of books read' axis.",
                        hint_ar: "Ø§ØªØ¨Ø¹ Ø¹Ù…ÙˆØ¯ ÙØ±ÙŠØ¯ ÙˆØµÙˆÙ„Ø§Ù‹ Ø¥Ù„Ù‰ Ù…Ø­ÙˆØ± 'Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©'.",
                        point: 1 
                    },
                    { 
                        q_en: "What is the total number of books read by both Maya and Lucas?", 
                        q_ar: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù„Ù„ÙƒØªØ¨ Ø§Ù„ØªÙŠ Ù‚Ø±Ø£Ù‡Ø§ ÙƒÙ„ Ù…Ù† Ù…Ø§ÙŠØ§ ÙˆÙ„ÙˆÙƒØ§Ø³ Ù…Ø¹Ø§Ù‹ØŸ", 
                        options: ["10 books (10 ÙƒØªØ¨)", "12 books (12 ÙƒØªØ§Ø¨Ø§Ù‹)", "14 books (14 ÙƒØªØ§Ø¨Ø§Ù‹)"], 
                        correct: "12 books (12 ÙƒØªØ§Ø¨Ø§Ù‹)", 
                        explanation_en: "Maya read 6 books and Lucas read 6 books. 6 + 6 = 12.", 
                        explanation_ar: "Ù‚Ø±Ø£Øª Ù…Ø§ÙŠØ§ 6 ÙƒØªØ¨ ÙˆÙ‚Ø±Ø£ Ù„ÙˆÙƒØ§Ø³ 6 ÙƒØªØ¨. Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù‡Ùˆ 12.", 
                        hint_en: "Add the values of the yellow bar and the pink bar.",
                        hint_ar: "Ø§Ø¬Ù…Ø¹ Ù‚ÙŠÙ… Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ØµÙØ± ÙˆØ§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙˆØ±Ø¯ÙŠ.",
                        point: 1 
                    },
                    { 
                        q_en: "Which option shows the correct order of the Design Process steps?", 
                        q_ar: "Ø£ÙŠ Ø®ÙŠØ§Ø± ÙŠÙˆØ¶Ø­ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ø®Ø·ÙˆØ§Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØµÙ…ÙŠÙ…ØŸ", 
                        options: [
                            "Imagine, Ask, Plan, Test, Create, Improve", 
                            "Ask, Imagine, Plan, Create, Test, Improve", 
                            "Ask, Plan, Imagine, Test, Create, Improve"
                        ], 
                        correct: "Ask, Imagine, Plan, Create, Test, Improve", 
                        explanation_en: "The correct sequence is: Ask, Imagine, Plan, Create, Test, Improve.", 
                        explanation_ar: "Ø§Ù„ØªØ³Ù„Ø³Ù„ Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ùˆ: Ø§Ø³Ø£Ù„ØŒ ØªØ®ÙŠÙ„ØŒ Ø®Ø·Ø·ØŒ Ù†ÙØ°ØŒ Ø§Ø®ØªØ¨Ø±ØŒ Ø­Ø³Ù†.", 
                        hint_en: "It starts with a question and ends with making it better.",
                        hint_ar: "ØªØ¨Ø¯Ø£ Ø¨Ø³Ø¤Ø§Ù„ ÙˆØªÙ†ØªÙ‡ÙŠ Ø¨Ø¬Ø¹Ù„ Ø§Ù„Ø´ÙŠØ¡ Ø£ÙØ¶Ù„.",
                        point: 1 
                    }
                ],
                // Set 2: (Original Data Concepts set) - Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙˆØ±Ø© Ù‡Ù†Ø§
                [
                    { q_en: "What type of data is the name 'Mohammed'?", q_ar: "Ù…Ø§ Ù‡Ùˆ Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø§Ø³Ù… 'Ù…Ø­Ù…Ø¯'ØŸ", options: ["Number (Ø±Ù‚Ù…)", "Text (Ù†Øµ)", "Date (ØªØ§Ø±ÙŠØ®)"], correct: "Text (Ù†Øµ)", explanation_en: "Names are made up of letters, which are stored as Text data.", explanation_ar: "Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ØªØªÙƒÙˆÙ† Ù…Ù† Ø£Ø­Ø±ÙØŒ ÙˆØ§Ù„ØªÙŠ ÙŠØªÙ… ØªØ®Ø²ÙŠÙ†Ù‡Ø§ ÙƒØ¨ÙŠØ§Ù†Ø§Øª Ù†ØµÙŠØ©.", hint_en: "Does this information contain only digits?", hint_ar: "Ù‡Ù„ ØªØ­ØªÙˆÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·ØŸ", point: 1 },
                    { q_en: "What type of data is '15.5' (a measurement)?", q_ar: "Ù…Ø§ Ù‡Ùˆ Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù€ '15.5' (Ù…Ø«Ù„ Ù‚ÙŠØ§Ø³ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©)ØŸ", options: ["Text (Ù†Øµ)", "Date (ØªØ§Ø±ÙŠØ®)", "Number (Ø±Ù‚Ù…)"], correct: "Number (Ø±Ù‚Ù…)", explanation_en: "Measurements and quantities, even with decimals, are classified as Number data.", explanation_ar: "ÙŠØªÙ… ØªØµÙ†ÙŠÙ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„ÙƒÙ…ÙŠØ§ØªØŒ Ø­ØªÙ‰ Ù…Ø¹ Ø§Ù„ÙÙˆØ§ØµÙ„ Ø§Ù„Ø¹Ø´Ø±ÙŠØ©ØŒ ÙƒØ¨ÙŠØ§Ù†Ø§Øª Ø±Ù‚Ù…ÙŠØ©.", hint_en: "Can you do math with this data?", hint_ar: "Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ§Øª Ø­Ø³Ø§Ø¨ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ", point: 1 },
                    { q_en: "Why do we use **Data Visualization** (like charts and graphs)?", q_ar: "Ù„Ù…Ø§Ø°Ø§ Ù†Ø³ØªØ®Ø¯Ù… **ØªØµÙˆØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª** (Ù…Ø«Ù„ Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª ÙˆØ§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©)ØŸ", options: ["To make the data confusing.", "To help us see patterns and understand the data quickly.", "To hide information."], correct: "To help us see patterns and understand the data quickly.", explanation_en: "Visualizing data transforms complex information into easily understandable charts to spot trends and insights.", explanation_ar: "ÙŠØ­ÙˆÙ‘Ù„ ØªØµÙˆØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© Ø¥Ù„Ù‰ Ù…Ø®Ø·Ø·Ø§Øª Ø³Ù‡Ù„Ø© Ø§Ù„ÙÙ‡Ù… Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª ÙˆØ§Ù„Ø±Ø¤Ù‰.", hint_en: "It helps people read a big table of numbers much faster.", hint_ar: "ÙŠØ³Ø§Ø¹Ø¯ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø¹Ù„Ù‰ Ù‚Ø±Ø§Ø¡Ø© Ø¬Ø¯ÙˆÙ„ ÙƒØ¨ÙŠØ± Ù…Ù† Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¨Ø´ÙƒÙ„ Ø£Ø³Ø±Ø¹ Ø¨ÙƒØ«ÙŠØ±.", point: 1 }
                ]
            ],
            // --- AI Questions ---
            'AI': [
                // Set 1 (5 Questions based on paragraph)
                [
                    { q_en: "What does the abbreviation **AI** stand for?", q_ar: "Ù…Ø§Ø°Ø§ ÙŠØ±Ù…Ø² Ø§Ø®ØªØµØ§Ø± **AI**ØŸ", options: ["Active Imagination", "Artificial Intelligence", "Advanced Instruction"], correct: "Artificial Intelligence", explanation_en: "**AI** is the abbreviation for **Artificial Intelligence**, which refers to smart machines.", explanation_ar: "AI Ù‡Ùˆ Ø§Ø®ØªØµØ§Ø± **Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ**ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø¢Ù„Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©.", hint_en: "It is the technology that makes machines smart like humans.", hint_ar: "Ø¥Ù†Ù‡Ø§ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„ØªÙŠ ØªØ¬Ø¹Ù„ Ø§Ù„Ø¢Ù„Ø§Øª Ø°ÙƒÙŠØ© Ù…Ø«Ù„ Ø§Ù„Ø¨Ø´Ø±.", point: 1 },
                    { q_en: "What must AI use to get better at doing its job?", q_ar: "Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ³ØªØ®Ø¯Ù…Ù‡ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„ÙŠØµØ¨Ø­ Ø£ÙØ¶Ù„ ÙÙŠ Ø¹Ù…Ù„Ù‡ØŸ", options: ["Loud music.", "Data (information).", "Electricity only."], correct: "Data (information).", explanation_en: "AI learns through training on **data** (examples) to improve its accuracy and performance.", explanation_ar: "ÙŠØªØ¹Ù„Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¹Ù„Ù‰ **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª** (Ø§Ù„Ø£Ù…Ø«Ù„Ø©) Ù„ØªØ­Ø³ÙŠÙ† Ø¯Ù‚ØªÙ‡ ÙˆØ£Ø¯Ø§Ø¦Ù‡.", hint_en: "What do you call the 'examples' that AI uses to learn?", hint_ar: "Ù…Ø§Ø°Ø§ ØªØ³Ù…ÙŠ 'Ø§Ù„Ø£Ù…Ø«Ù„Ø©' Ø§Ù„ØªÙŠ ÙŠØ³ØªØ®Ø¯Ù…Ù‡Ø§ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„ØªØ¹Ù„Ù…ØŸ", point: 1 },
                    { q_en: "Who teaches robots how to behave?", q_ar: "Ù…Ù† Ø§Ù„Ø°ÙŠ ÙŠØ¹Ù„Ù… Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª ÙƒÙŠÙ ØªØªØµØ±ÙØŸ", options: ["Other robots", "The weather", "People (Ø§Ù„Ù†Ø§Ø³)"], correct: "People (Ø§Ù„Ù†Ø§Ø³)", explanation_en: "People create and train the AI.", explanation_ar: "Ø§Ù„Ù†Ø§Ø³ Ù‡Ù… Ù…Ù† ÙŠÙ‚ÙˆÙ…ÙˆÙ† Ø¨Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¢Ù„Ø©.", hint_en: "Think about who creates and trains the AI.", hint_ar: "ÙÙƒØ± ÙÙŠ Ù…Ù† ÙŠÙ‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.", point: 1 },
                    { q_en: "What is **Data** in the simplest terms?", q_ar: "Ù…Ø§ Ù‡ÙŠ **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª** Ø¨Ø£Ø¨Ø³Ø· Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§ØªØŸ", options: ["Old machines.", "The biggest challenge.", "Information (like pictures or answers)."], correct: "Information (like pictures or answers).", explanation_en: "Data is simply the information that AI processes.", explanation_ar: "Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡ÙŠ Ø¨Ø¨Ø³Ø§Ø·Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª - Ù…Ø«Ù„ Ø§Ù„Ù†ØµÙˆØµØŒ Ø§Ù„ØµÙˆØ±ØŒ Ø£Ùˆ Ø§Ù„Ø£ØµÙˆØ§Øª - Ø§Ù„ØªÙŠ ÙŠØ¹Ø§Ù„Ø¬Ù‡Ø§ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.", hint_en: "It's what we give to the AI to read and see.", hint_ar: "Ø¥Ù†Ù‡ Ù…Ø§ Ù†Ù‚Ø¯Ù…Ù‡ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„ÙŠÙ‚Ø±Ø£Ù‡ ÙˆÙŠØ±Ø§Ù‡.", point: 1 },
                    { q_en: "What happens if we donâ€™t teach AI well?", q_ar: "Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ø¥Ø°Ø§ Ù„Ù… Ù†Ù‚Ù… Ø¨ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¬ÙŠØ¯Ø§Ù‹ØŸ", options: ["It becomes smarter", "It makes mistakes (wrong thing)", "It takes a vacation"], correct: "It makes mistakes (wrong thing)", explanation_en: "Poor training data leads to incorrect decisions (mistakes).", explanation_ar: "Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø±Ø¯ÙŠØ¡ ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ø®Ø§Ø·Ø¦Ø© (Ø£Ø®Ø·Ø§Ø¡).", hint_en: "Think about the consequence of poor training data.", hint_ar: "ÙÙƒØ± ÙÙŠ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø±Ø¯ÙŠØ¦Ø©.", point: 1 }
                ],
            ]
        };


        // --- Application Flow Functions ---

        /**
         * Step 1: Show bilingual welcome message and name input.
         */
        function showWelcomeScreen() {
            document.getElementById('content').innerHTML = `
                <h1 class="text-2xl font-bold text-center text-blue-600 mb-6">ğŸš€ Grade 3...Train now, win later!ğŸš€ ØªØ¯Ø±Ù‘Ø¨ Ø§Ù„Ø¢Ù†ØŒ Ù„ØªÙÙˆØ² Ù„Ø§Ø­Ù‚Ø§Ù‹!</h1>
                
                <p class="text-gray-700 text-base mb-4 text-center">
                    ğŸ‘‹ Welcome! What's your name? / Ù…Ø±Ø­Ø¨Ø§Ù‹! Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù…ÙƒØŸ
                </p>
                
                <input type="text" id="nameInput" placeholder="Your Name / Ø§Ø³Ù…Ùƒ"
                    class="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center">
                
                <p class="text-center font-semibold mb-3">Choose your topic / Ø§Ø®ØªØ± Ù…ÙˆØ¶ÙˆØ¹Ùƒ:</p>
                <button onclick="selectTopic('CCDI', 0)" 
                        class="w-full p-3 mb-3 bg-indigo-500 text-white font-semibold rounded-lg hover:bg-indigo-600 focus:outline-none focus:ring-4 focus:ring-indigo-300 answer-btn arabic-text-btn">
                    Start CCDI Quiz (Data Concepts)
                </button>
                
                <button onclick="selectTopic('AI', 0)" 
                        class="w-full p-3 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 focus:outline-none focus:ring-4 focus:ring-purple-300 answer-btn arabic-text-btn">
                    Start AI Quiz (Artificial Intelligence)
                </button>
            `;
        }

        /**
         * Step 2: Set topic and start the quiz.
         */
        function selectTopic(topic, setIndex = 0) {
            const nameInput = document.getElementById('nameInput');

            if (nameInput) {
                userName = nameInput.value.trim();
                if (!userName) {
                    nameInput.classList.add('border-red-500', 'ring-red-200');
                    showTemporaryMessage("Please enter your name first. / Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹.", 'error');
                    return;
                }
            } else if (!userName) {
                showTemporaryMessage("Error: User name not set. Returning to start.", 'error');
                showWelcomeScreen();
                return;
            }

            currentTopic = topic;
            currentSetIndex = setIndex; 
            currentQuestionSet = QUESTION_SETS[topic][setIndex % QUESTION_SETS[topic].length]; 
            questionIndex = 0;
            score = 0;
            feedback = [];
            attemptsMade = 0; 
            hintUsed = false;
            
            showQuestion();
        }

        /**
         * Step 10: Show the current question (one by one).
         */
        function showQuestion() {
            if (questionIndex >= currentQuestionSet.length) {
                showResults();
                return;
            }

            const currentQ = currentQuestionSet[questionIndex];
            const topicName = currentTopic === 'CCDI' ? 'Data Concepts (CCDI)' : 'Artificial Intelligence (AI)';
            attemptsMade = 0; 
            hintUsed = false; 

            let optionsHtml = '';
            // Shuffle options for better interactivity
            const shuffledOptions = [...currentQ.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach((option, index) => {
                const safeOption = option.replace(/'/g, "\\'").replace(/"/g, '\\"');
                optionsHtml += `
                    <button id="option-${index}" onclick="submitAnswer('${safeOption}')"
                            data-option="${safeOption}"
                            class="answer-btn w-full p-3 my-2 bg-gray-100 text-gray-800 rounded-lg transition duration-150 ease-in-out hover:bg-blue-100 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 arabic-text-btn">
                        ${String.fromCharCode(65 + index)}. ${option}
                    </button>
                `;
            });
            
            // ğŸ›‘ Logic to display the clickable link only for the first CCDI question ğŸ›‘
            let imageHtml = '';
            if (currentQ.image_link && currentTopic === 'CCDI' && questionIndex < 5) {
                 imageHtml = `
                    <div class="mb-4 p-4 bg-yellow-50 border border-yellow-300 rounded-lg text-center">
                        <p class="font-bold text-lg text-yellow-800 mb-2 arabic-text">
                            ğŸš¨ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø£Ø±Ø¨Ø¹Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© ğŸš¨
                        </p>
                        <a href="${currentQ.image_link}" target="_blank" 
                           class="inline-block p-3 bg-yellow-500 text-white font-semibold rounded-lg hover:bg-yellow-600 transition duration-150">
                           Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
                        </a>
                        <p class="text-sm mt-2 text-yellow-700 arabic-text">
                            (Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©ØŒ Ø¹Ø¯ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©)
                        </p>
                    </div>`;
            }


            document.getElementById('content').innerHTML = `
                <h2 class="text-xl font-bold text-center text-blue-600 mb-4">${topicName} Quiz ğŸ“</h2>
                <div class="mb-4 text-center">
                    <p class="text-sm text-gray-500">Question ${questionIndex + 1} of ${currentQuestionSet.length}</p>
                    <div class="w-full h-1 bg-blue-200 rounded-full overflow-hidden mt-1">
                        <div class="h-1 bg-blue-500" style="width: ${((questionIndex + 1) / currentQuestionSet.length) * 100}%"></div>
                    </div>
                </div>
                
                ${imageHtml}
                
                <div class="p-4 bg-blue-50 rounded-lg mb-6 border border-blue-200">
                    <p class="mb-2 font-semibold text-gray-800 text-lg">${currentQ.q_en}</p>
                    <p class="arabic-text font-semibold text-gray-800 text-lg">${currentQ.q_ar}</p>
                </div>

                <div class="space-y-2" id="optionsContainer">
                    ${optionsHtml}
                </div>
                
                <div id="hintContainer" class="mt-4 text-center">
                    <button id="hintButton" onclick="showHint()" 
                            class="hint-btn p-2 px-4 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-300 transition duration-150">
                        ğŸ’¡ ØªÙ„Ù…ÙŠØ­ (Hint)
                    </button>
                </div>
                
                <div id="messageBox" class="mt-4 hidden p-3 rounded-lg text-center font-medium"></div>
                
                <div id="explanationBox" class="mt-4 hidden p-4 rounded-lg"></div>
                
                <div id="nextButtonContainer" class="mt-4"></div>
            `;
        }

        /**
         * Displays the hint for the current question in a temporary message box.
         */
        window.showHint = function() {
            const currentQ = currentQuestionSet[questionIndex];
            hintUsed = true;
            document.getElementById('hintButton').disabled = true; // Disable hint after use
            
            const hintMessage = `
                <p class="mb-1 text-sm font-bold">Hint (ØªÙ„Ù…ÙŠØ­):</p>
                <p class="text-xs">${currentQ.hint_en || 'No hint available.'}</p>
                <p class="arabic-text text-xs">${currentQ.hint_ar || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙ„Ù…ÙŠØ­.'}</p>
            `;
            showTemporaryMessage(hintMessage, 'hint');
        }

        /**
         * Handle user answer submission with a retry mechanism.
         */
        function submitAnswer(selectedOption) {
            const currentQ = currentQuestionSet[questionIndex];
            const isCorrect = (selectedOption === currentQ.correct);
            const messageBox = document.getElementById('messageBox');
            const explanationBox = document.getElementById('explanationBox');
            const optionsContainer = document.getElementById('optionsContainer');
            const nextButtonContainer = document.getElementById('nextButtonContainer');
            const hintButton = document.getElementById('hintButton');
            
            if (hintButton) hintButton.style.display = 'none';

            Array.from(optionsContainer.querySelectorAll('button')).forEach(btn => {
                btn.classList.remove('bg-blue-200', 'ring-2', 'ring-blue-500');
                if (btn.getAttribute('data-option') === selectedOption) {
                    btn.classList.add('bg-blue-200', 'ring-2', 'ring-blue-500');
                }
                btn.disabled = true;
            });

            const showFeedbackAndProceed = (correct) => {
                Array.from(optionsContainer.querySelectorAll('button')).forEach(btn => btn.disabled = true);
                
                explanationBox.classList.remove('hidden');
                explanationBox.innerHTML = `
                    <p class="font-bold mb-1 text-gray-900">Explanation / Ø§Ù„Ø´Ø±Ø­:</p>
                    <p class="text-sm text-gray-700">${currentQ.explanation_en}</p>
                    <p class="arabic-text text-sm text-gray-700">${currentQ.explanation_ar}</p>
                `;

                if (correct) {
                    messageBox.className = 'mt-4 block p-3 rounded-lg text-center font-medium bg-emerald-100 text-emerald-800';
                    messageBox.innerHTML = `âœ… Correct! (${attemptsMade === 1 ? 'on second try' : 'on first try'}) / Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ğŸ‰ (${attemptsMade === 1 ? 'ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©' : 'ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰'})`;
                    explanationBox.className = 'mt-4 block p-4 rounded-lg bg-emerald-50 border border-emerald-300';
                    
                    Array.from(optionsContainer.querySelectorAll('button')).forEach(btn => {
                        if (btn.getAttribute('data-option') === currentQ.correct) {
                            btn.classList.add('bg-emerald-200', 'text-emerald-900');
                            btn.classList.remove('bg-gray-100', 'hover:bg-blue-100', 'bg-blue-200', 'ring-2', 'ring-blue-500');
                        }
                    });
                } else {
                    messageBox.className = 'mt-4 block p-3 rounded-lg text-center font-medium bg-rose-100 text-rose-800';
                    messageBox.innerHTML = `âŒ Still incorrect. The correct answer is: <b>${currentQ.correct}</b>. / Ù„Ø§ ØªØ²Ø§Ù„ Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: <b>${currentQ.correct}</b>.`;
                    explanationBox.className = 'mt-4 block p-4 rounded-lg bg-rose-50 border border-rose-300';
                    
                    Array.from(optionsContainer.querySelectorAll('button')).forEach(btn => {
                        if (btn.getAttribute('data-option') === currentQ.correct) {
                            btn.classList.add('bg-emerald-200', 'text-emerald-900');
                        } else if (btn.getAttribute('data-option') === selectedOption) {
                            btn.classList.add('bg-rose-200', 'text-rose-900');
                        }
                        btn.classList.remove('bg-gray-100', 'hover:bg-blue-100', 'bg-blue-200', 'ring-2', 'ring-blue-500');
                    });
                }
                
                feedback.push({
                    question: currentQ.q_en,
                    selected: selectedOption,
                    correct: currentQ.correct,
                    isCorrect: correct,
                    explanation_en: currentQ.explanation_en,
                    explanation_ar: currentQ.explanation_ar,
                    hintUsed: hintUsed
                });

                addNextButton(nextButtonContainer);
            };


            if (isCorrect) {
                score += currentQ.point || 1;
                showFeedbackAndProceed(true);

            } else {
                attemptsMade++;
                
                if (attemptsMade === 1) {
                    messageBox.className = 'mt-4 block p-3 rounded-lg text-center font-medium bg-yellow-100 text-yellow-700';
                    messageBox.innerHTML = 'âŒ Incorrect. Try again! / Ø®Ø·Ø£. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! ğŸ’¡';

                    Array.from(optionsContainer.querySelectorAll('button')).forEach(btn => {
                        btn.disabled = false; 
                        btn.classList.remove('bg-blue-200', 'ring-2', 'ring-blue-500'); 
                    });

                } else {
                    showFeedbackAndProceed(false);
                }
            }
        }
        
        /**
         * Helper function to add the next button after an answer is final.
         */
        function addNextButton(container) {
            container.innerHTML = '';
            const nextButton = document.createElement('button');
            nextButton.textContent = 'Next Question / Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â¡ï¸';
            nextButton.onclick = () => {
                questionIndex++;
                showQuestion();
            };
            nextButton.className = 'w-full p-3 mt-4 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 answer-btn arabic-text-btn';
            container.appendChild(nextButton);
        }

        /**
         * Display results, feedback, and encouragement.
         */
        function showResults() {
            const totalQuestions = currentQuestionSet.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            let encouragement = '';
            
            if (percentage === 100) {
                encouragement = "Amazing job, ${userName}! You nailed it! ğŸŒŸ / Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹ØŒ ${userName}! Ù„Ù‚Ø¯ Ù†Ø¬Ø­Øª Ø¨Ø§Ù…ØªÙŠØ§Ø²! ğŸ¤©";
            } else if (percentage >= 60) {
                encouragement = "Great effort, ${userName}! You are doing well. Keep going! ğŸ‘ / Ø¬Ù‡Ø¯ Ø¹Ø¸ÙŠÙ…ØŒ ${userName}! Ø£Ù†Øª ØªØ³ÙŠØ± Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯. Ø§Ø³ØªÙ…Ø±! ğŸ’ª";
            } else {
                encouragement = "Good start, ${userName}! Learning is a journey, keep practicing! ğŸ’¡ / Ø¨Ø¯Ø§ÙŠØ© Ø¬ÙŠØ¯Ø©ØŒ ${userName}! Ø§Ù„ØªØ¹Ù„Ù… Ø±Ø­Ù„Ø©ØŒ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨! ğŸ“š";
            }
            
            encouragement = encouragement.replace(/\$\{(\w+)\}/g, (_, key) => {
                if (key === 'userName') return userName;
                return '';
            });

            let feedbackHtml = feedback.map((f, index) => `
                <div class="p-3 my-3 rounded-lg ${f.isCorrect ? 'bg-emerald-50 border-emerald-200' : 'bg-rose-50 border-rose-200'} border arabic-text">
                    <p class="font-bold text-sm">Q${index + 1}: ${f.question}</p>
                    <p class="text-xs text-gray-700">Your Answer / Ø¥Ø¬Ø§Ø¨ØªÙƒ: 
                        <span class="${f.isCorrect ? 'text-emerald-700' : 'text-rose-700'} font-medium">${f.selected}</span>
                    </p>
                    <p class="text-xs text-gray-600">Hint Used / ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙ„Ù…ÙŠØ­: ${f.hintUsed ? 'Yes (Ù†Ø¹Ù…)' : 'No (Ù„Ø§)'}</p>
                    ${!f.isCorrect ? `
                        <p class="text-xs text-rose-800 font-bold mt-1">Correct Answer / Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${f.correct}</p>
                        <p class="text-xs text-rose-800 font-medium mt-2">Feedback / Ø´Ø±Ø­ Ø§Ù„Ø®Ø·Ø£:</p>
                        <p class="text-xs text-rose-700">${f.explanation_en}</p>
                        <p class="arabic-text text-xs text-rose-700">${f.explanation_ar}</p>
                    ` : ''}
                </div>
            `).join('');

            document.getElementById('content').innerHTML = `
                <h2 class="text-2xl font-extrabold text-center text-blue-600 mb-6">Results for ${userName}</h2>
                <h2 class="text-2xl font-extrabold arabic-text text-center text-blue-600 mb-6">Ù†ØªØ§Ø¦Ø¬ ${userName}</h2>

                <div class="text-center p-4 bg-blue-100 rounded-lg mb-6 shadow-md">
                    <p class="text-lg font-semibold text-gray-800">Your Score: ${score} out of ${totalQuestions}</p>
                    <p class="text-lg font-semibold arabic-text text-gray-800">Ø¯Ø±Ø¬ØªÙƒ: ${score} Ù…Ù† ${totalQuestions}</p>
                    <p class="text-4xl font-bold text-blue-700 mt-2">${percentage}%</p>
                </div>
                
                <p class="text-lg text-center font-bold mb-6 text-indigo-600">${encouragement}</p>


                <h3 class="text-xl font-bold text-gray-700 mb-3 border-b pb-2 arabic-text">Full Review / Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©:</h3>
                <div class="max-h-60 overflow-y-auto mb-6">
                    ${feedbackHtml}
                </div>

                <div class="mt-8">
                    <p class="text-center font-semibold mb-3 arabic-text">Do you want to continue practicing? / Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ØŸ</p>
                    <div class="flex space-x-4 space-x-reverse justify-center">
                        <button onclick="handleContinue(true)" 
                                class="w-1/2 p-3 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 answer-btn arabic-text-btn">
                            Yes / Ù†Ø¹Ù…
                        </button>
                        <button onclick="handleContinue(false)" 
                                class="w-1/2 p-3 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 answer-btn arabic-text-btn">
                            No / Ù„Ø§
                        </button>
                    </div>
                </div>
            `;
        }

        /**
         * Handle continue or stop logic.
         */
        function handleContinue(continuePractice) {
            if (continuePractice) {
                // Determine the next set index 
                const currentSetIndex = QUESTION_SETS[currentTopic].findIndex(set => set === currentQuestionSet);
                const nextSetIndex = (currentSetIndex + 1) % QUESTION_SETS[currentTopic].length;
                
                // Call selectTopic with the correct index to load the next set
                selectTopic(currentTopic, nextSetIndex);
            } else {
                // Goodbye Message
                document.getElementById('content').innerHTML = `
                    <h2 class="text-3xl font-bold text-center text-blue-600 mb-6">Quiz Ended ğŸ¥³</h2>
                    <p class="text-xl text-gray-700 text-center mb-6">
                        ğŸ‘‹ Goodbye, ${userName}! See you next time!
                    </p>
                    <p class="arabic-text text-xl text-gray-700 text-center mb-12">
                        Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‚Ø§Ø¡ØŒ ${userName}! Ù†Ø±Ø§Ùƒ Ù„Ø§Ø­Ù‚Ø§Ù‹! ğŸ‘‹
                    </p>
                    <button onclick="showWelcomeScreen()" 
                            class="w-full p-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 answer-btn arabic-text-btn">
                        Start New Quiz / Ø§Ø¨Ø¯Ø£ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
                    </button>
                `;
            }
        }
        
        /**
         * --- Temporary Message Box (Replaces alert()) ---
         */
        function showTemporaryMessage(message, type = 'info') {
            const container = document.getElementById('tempMessageBoxContainer');
            let messageBox = document.getElementById('tempMessageBox');

            if (!messageBox) {
                messageBox = document.createElement('div');
                messageBox.id = 'tempMessageBox';
                // Initially off-screen
                messageBox.className = 'fixed top-4 right-4 p-4 rounded-lg shadow-xl z-50 transition-transform duration-500 transform translate-x-full';
                container.appendChild(messageBox);
            }

            let bgColor = 'bg-blue-500';
            let icon = 'â„¹ï¸';
            let duration = 3000;
            
            if (type === 'error') {
                bgColor = 'bg-red-500';
                icon = 'âŒ';
            } else if (type === 'success') {
                bgColor = 'bg-green-500';
                icon = 'âœ…';
            } else if (type === 'hint') {
                bgColor = 'bg-yellow-500';
                icon = 'ğŸ’¡';
                duration = 5000; // Keep hints visible longer
            }

            // Show message
            messageBox.className = `fixed top-4 right-4 p-4 rounded-lg shadow-xl z-50 transition-transform duration-500 ${bgColor} text-white font-semibold transform translate-x-0`;
            messageBox.innerHTML = `${icon} ${message}`;

            // Hide after duration
            setTimeout(() => {
                messageBox.classList.add('translate-x-full');
            }, duration);
        }

        // Initialize the app using the most robust method: DOMContentLoaded
        document.addEventListener('DOMContentLoaded', showWelcomeScreen);

    </script>
</body>
</html>